<psm-widget>
  <table class="table table-condensed">
    <thead>
      <tr>
        <th>User</th>
        <th>First timestamp</th>
        <th>Last timestamp</th>
        <th>Sweeps</th>
        <th>Mode</th>
        <th>Frequencies</th>
        <th class="feature">Audio</th>
        <th class="indicator">&nbsp;</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let config of configs" (click)="onSelect(config.id, $event)" [ngClass]="{ 'row-selected': selected == config.id }" [title]="config.values.scan.description || '[no description]'">
        <td>{{config.values.user}}</td>
        <td>{{config.timestamp | date}}</td>
        <td>{{config.latest | date}}</td>
        <td>{{config.count}}</td>
        <td>{{mode(config.values.scan.mode)}}</td>
        <td>
          <span *ngIf="config.values.scan.freqs[0].enabled">
            {{config.values.scan.freqs[0].range[0]}} - {{config.values.scan.freqs[0].range[1]}} (&Delta; {{config.values.scan.freqs[0].range[2]}}) {{config.values.scan.freqs[0].exp | units}}
          </span>
          <span *ngIf="config.values.scan.freqs[1].enabled">
            <span *ngFor="let freq of config.values.scan.freqs; let n = index">
              <span *ngIf="n > 0 && n < 3">{{freq.freq}}{{freq.exp | units}}&nbsp;</span>
              <span *ngIf="n == 3">&hellip;</span>
            </span>
          </span>
        </td>
        <td class="feature">{{config.values.scan.audio.enabled ? '✔' : '✘'}}</td>
        <td class="indicator">
          <div *ngIf="user.roleIn(['admin']) || running(config)">
            <input *ngIf="! running(config)" type="checkbox" [disabled]="standby" [(ngModel)]="checked[config.id]">
            <span *ngIf="running(config)" class="running">&#x25FC;</span>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
  <button type="button" (click)="onExport()" class="btn btn-default btn-selected" [disabled]="loading || ! selected">Export</button>
  <button type="button" (click)="onDownload()" class="btn btn-default btn-selected" [disabled]="loading || ! selected">Download</button>
  <input type="checkbox" name="rds" [disabled]="loading || ! selected" [(ngModel)]="rds">
  <label for="rds">RDS</label>
  <div *ngIf="user.roleIn(['admin'])" class="btn-right">
    <button type="button" (click)="onCheckAll()" class="btn btn-default" [disabled]="loading || standby || checkedIds().length == maxChecked">All</button>
    <button type="button" (click)="onCheckNone()" class="btn btn-default" [disabled]="loading || standby || checkedIds().length == 0">None</button>
    <button type="button" (click)="onDelete()" class="btn btn-default" [disabled]="loading || standby || checkedIds().length == 0"><input type="checkbox" onclick="return false" checked>&nbsp;Delete</button>
  </div>
</psm-widget>
